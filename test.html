<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.5, user-scalable=yes">
  <title>Shahul Finance ¬∑ demo prefill only on click</title>
  <!-- Font Awesome & Chart.js -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <style>
    /* ----- GLOBAL / THEME (exactly same previous colours) ----- */
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Roboto, system-ui, sans-serif; }
    :root {
      --primary: #2563eb; --primary-light: #dbeafe; --secondary: #0d9488;
      --success: #22c55e; --warning: #f59e0b; --danger: #ef4444;
      --dark: #0f172a; --light: #ffffff; --gray: #f8fafc; --border: #e2e8f0;
      --card-shadow: 0 10px 25px -5px rgba(0,0,0,0.05), 0 8px 10px -6px rgba(0,0,0,0.02);
      --glow: 0 0 15px rgba(37,99,235,0.5);
    }
    body { background: #f1f5f9; color: #1e293b; min-height: 100vh; display: flex; flex-direction: column; }
    .container { max-width: 1400px; margin: 0 auto; padding: 0 16px; }  /* reduced padding for mobile */
    
    /* navigation ‚Äî mobile friendly */
    nav { background: var(--light); border-bottom: 1px solid var(--border); position: sticky; top: 0; z-index: 50; }
    .nav-container { display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; padding: 10px 0; gap: 8px; }
    .logo { font-size: 1.5rem; font-weight: 700; color: var(--primary); display: flex; align-items: center; gap: 6px; }
    .nav-links { display: flex; flex-wrap: wrap; gap: 16px; list-style: none; align-items: center; margin: 4px 0; }
    .nav-links a { text-decoration: none; color: #334155; font-weight: 500; font-size: 0.95rem; padding: 6px 0; white-space: nowrap; transition: 0.2s; }
    .nav-links a:hover { color: var(--primary); transform: translateY(-1px); }
    .nav-links li.active a { color: var(--primary); font-weight: 600; border-bottom: 3px solid var(--primary); }
    .btn { background: var(--primary); color: white; border: none; padding: 8px 18px; border-radius: 40px; font-weight: 600; display: inline-flex; align-items: center; gap: 8px; cursor: pointer; transition: 0.2s; box-shadow: 0 4px 6px -2px rgba(37,99,235,0.3); font-size: 0.95rem; white-space: nowrap; }
    .btn:hover { background: #1d4ed8; transform: scale(1.02); box-shadow: var(--glow); }
    .btn-outline { background: transparent; border: 2px solid var(--primary); color: var(--primary); box-shadow: none; }
    .btn-outline:hover { background: var(--primary); color: white; transform: scale(1.02); }
    .btn-success { background: var(--success); }
    .btn-success:hover { background: #16a34a; }
    .btn-demo { background: #8b5cf6; box-shadow: 0 4px 10px rgba(139,92,246,0.4); }
    .btn-demo:hover { background: #7c3aed; }

    /* pages */
    .page { display: none; padding: 24px 0; animation: fade 0.3s ease; }
    .page.active { display: block; }
    @keyframes fade { from { opacity:0.4; } to { opacity:1; } }
    .section-title { margin-bottom: 32px; text-align: center; }
    .section-title h2 { font-size: 1.9rem; color: var(--dark); letter-spacing: -0.02em; line-height: 1.2; }
    .section-title p { color: #475569; }

    /* cards & grid ‚Äî responsive */
    .dashboard-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 20px; margin-bottom: 30px; }
    .card { background: var(--light); border-radius: 28px; padding: 24px; box-shadow: var(--card-shadow); border: 1px solid rgba(0,0,0,0.02); transition: 0.2s; }
    .card:hover { transform: translateY(-4px); box-shadow: 0 20px 30px -10px rgba(0,0,0,0.15); }
    .stat-card { text-align: center; }
    .stat-card i { font-size: 2.5rem; color: var(--primary); background: var(--primary-light); padding: 16px; border-radius: 60px; transition: 0.3s; }
    .stat-card:hover i { transform: rotate(5deg) scale(1.05); }
    .amount { font-size: 1.8rem; font-weight: 700; color: var(--dark); margin-top: 8px; word-break: break-word; }

    /* feature badges */
    .features-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 16px; margin-top: 30px; }
    .feature-badge { background: var(--light); border-radius: 24px; padding: 20px 10px; text-align: center; box-shadow: var(--card-shadow); border: 1px solid var(--border); transition: 0.2s; }
    .feature-badge:hover { background: var(--primary-light); border-color: var(--primary); transform: scale(1.02); }
    .feature-badge i { font-size: 2rem; color: var(--primary); margin-bottom: 8px; }
    .feature-badge h4 { font-weight: 600; margin-bottom: 4px; font-size: 1rem; }
    .feature-badge small { color: #64748b; font-size: 0.8rem; }

    /* transaction list */
    .txn-list { background: white; border-radius: 28px; padding: 20px; overflow-x: auto; }
    .txn-row { display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px solid var(--border); gap: 10px; flex-wrap: wrap; transition: 0.1s; }
    .txn-row:hover { background: #f8fafc; border-radius: 20px; padding-left: 8px; }
    .txn-icon { width: 44px; height: 44px; border-radius: 20px; background: #eef2ff; display: flex; align-items: center; justify-content: center; color: var(--primary); flex-shrink: 0; }
    .income-badge { color: var(--success); background: #e6f7e6; padding: 4px 12px; border-radius: 40px; font-weight: 600; white-space: nowrap; }
    .expense-badge { color: var(--danger); background: #fee9e7; padding: 4px 12px; border-radius: 40px; font-weight: 600; white-space: nowrap; }

    .attach-row { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; background: #f1f5f9; padding: 12px; border-radius: 30px; margin: 15px 0; transition: 0.2s; }
    .attach-row:hover { background: #e6edf7; }
    .currency-select { padding: 10px; border-radius: 30px; border: 2px solid var(--border); background: white; }

    /* vehicle & investment cards */
    .compact-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin: 30px 0; }
    .mini-card { background: white; border-radius: 24px; padding: 16px; display: flex; align-items: center; gap: 14px; border: 1px solid var(--border); transition: 0.2s; }
    .mini-card:hover { border-color: var(--primary); background: #f5f3ff; }
    .mini-card .fa-car, .mini-card .fa-chart-line { font-size: 2rem; color: var(--primary); }

    /* chart containers */
    .chart-glass { background: white; border-radius: 32px; padding: 20px; margin-bottom: 30px; box-shadow: var(--card-shadow); overflow-x: auto; transition: 0.2s; }
    .chart-glass:hover { box-shadow: 0 20px 30px -10px rgba(37,99,235,0.2); }
    .report-btn { background: var(--gray); border: 1px dashed var(--primary); border-radius: 40px; padding: 10px 18px; color: var(--primary); font-weight: 600; font-size: 0.9rem; white-space: nowrap; transition: 0.2s; cursor: default; }
    .report-btn i { margin-right: 5px; }

    /* modal (mobile friendly) */
    .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); align-items: center; justify-content: center; z-index: 200; backdrop-filter: blur(4px); padding: 16px; }
    .modal-content { background: white; max-width: 440px; width: 100%; padding: 32px 24px; border-radius: 48px; box-shadow: 0 25px 50px -12px black; position: relative; max-height: 90vh; overflow-y: auto; animation: modalPop 0.3s; }
    @keyframes modalPop { 0% { opacity:0; transform: scale(0.9); } 100% { opacity:1; transform: scale(1); } }
    .close-modal { position: absolute; top: 16px; right: 20px; font-size: 28px; cursor: pointer; color: #94a3b8; transition: 0.2s; }
    .close-modal:hover { color: var(--danger); transform: rotate(90deg); }
    .modal-input { width: 100%; padding: 16px; margin: 10px 0; border: 2px solid var(--border); border-radius: 30px; font-size: 1rem; transition: 0.2s; }
    .modal-input:focus { border-color: var(--primary); outline: none; box-shadow: 0 0 0 4px var(--primary-light); }

    .toggle-switch { position: relative; display: inline-block; width: 50px; height: 24px; flex-shrink: 0; }
    .toggle-switch input { opacity:0; width:0; height:0; }
    .slider { position: absolute; cursor: pointer; inset:0; background-color: #cbd5e1; border-radius: 24px; transition: 0.2s; }
    .slider:before { content:""; position: absolute; height:18px; width:18px; left:3px; bottom:3px; background-color: white; border-radius: 50%; transition: 0.2s; }
    input:checked + .slider { background-color: var(--primary); }
    input:checked + .slider:before { transform: translateX(26px); }

    /* loading */
    .loading-screen { position: fixed; inset: 0; background: linear-gradient(135deg, #2563eb, #7c3aed); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 999; color: white; gap: 16px; padding: 20px; text-align: center; }
    .spinner { width: 60px; height: 60px; border: 8px solid rgba(255,255,255,0.2); border-top-color: white; border-radius: 50%; animation: spin 0.9s infinite; }

    footer { text-align: center; padding: 30px 16px; margin-top: 50px; background: var(--dark); color: white; border-radius: 40px 40px 0 0; font-size: 0.9rem; }

    @keyframes spin { to { transform: rotate(360deg); } }

    /* setting item */
    .setting-item { display: flex; justify-content: space-between; align-items: center; padding: 16px 0; border-bottom: 1px solid var(--border); flex-wrap: wrap; gap: 10px; }
  </style>
</head>
<body>
<!-- loading screen -->
<div class="loading-screen" id="loadingScreen">
  <div class="spinner"></div>
  <h2>Shahul Finance ¬∑ demo prefill only on click</h2>
  <p>‚ú® click demo button ‚Üí auto-fill + go to home.html ‚ú®</p>
</div>

<!-- navigation -->
<nav>
  <div class="container nav-container">
    <div class="logo"><i class="fas fa-coins"></i> Shahul</div>
    <ul class="nav-links">
      <li class="active"><a href="#" data-page="home">Home</a></li>
      <li><a href="#" data-page="dashboard">Dash</a></li>
      <li><a href="#" data-page="transactions">Txns</a></li>
      <li><a href="#" data-page="reports">Reports</a></li>
      <li><a href="#" data-page="settings">Settings</a></li>
      <li><button class="btn" id="openAuth" style="padding:6px 14px;"><i class="fas fa-user-circle"></i> <span id="authButtonText">Login</span></button></li>
    </ul>
  </div>
</nav>

<!-- HOME page -->
<div id="home" class="page active">
  <div class="container">
    <div class="section-title"><h2>üí∞ complete finance</h2><p>by Shahul ¬∑ demo fills only when clicked ¬∑ stays blank otherwise</p></div>
    <div class="features-grid">
      <div class="feature-badge"><i class="fas fa-paperclip"></i><h4>attachments</h4><small>receipts/docs</small></div>
      <div class="feature-badge"><i class="fas fa-money-bill-transfer"></i><h4>multi‚Äëcurrency</h4><small>USD ¬∑ EUR ¬∑ INR</small></div>
      <div class="feature-badge"><i class="fas fa-chart-line"></i><h4>budget limits</h4><small>monthly caps</small></div>
      <div class="feature-badge"><i class="fas fa-file-invoice"></i><h4>invoice/receipt</h4><small>generate PDF</small></div>
      <div class="feature-badge"><i class="fas fa-truck"></i><h4>vehicle mgmt</h4><small>service & fuel</small></div>
      <div class="feature-badge"><i class="fas fa-hand-holding-usd"></i><h4>debt/credit</h4><small>payables</small></div>
      <div class="feature-badge"><i class="fas fa-chart-pie"></i><h4>P&L / balance</h4><small>trail balance</small></div>
      <div class="feature-badge"><i class="fas fa-boxes"></i><h4>inventory</h4><small>stock</small></div>
      <div class="feature-badge"><i class="fas fa-chart-bar"></i><h4>charts</h4><small>analysis</small></div>
      <div class="feature-badge"><i class="fas fa-leaf"></i><h4>investment</h4><small>tracker</small></div>
    </div>
    <!-- stats cards -->
    <div class="dashboard-grid" style="margin-top:40px">
      <div class="card stat-card"><i class="fas fa-scale-balanced"></i><h3>balance</h3><div class="amount">$12,480</div><small>multi‚Äëcurrency</small></div>
      <div class="card stat-card"><i class="fas fa-car"></i><h3>vehicle service</h3><div class="amount">2 due</div><small>oil change</small></div>
      <div class="card stat-card"><i class="fas fa-file-invoice"></i><h3>pending invoices</h3><div class="amount">3</div><small>$1,240</small></div>
      <div class="card stat-card"><i class="fas fa-chart-simple"></i><h3>investment</h3><div class="amount">+15.4%</div></div>
    </div>
    <p style="text-align:center; margin: 20px 0;"><i class="fas fa-arrow-right"></i> üëá click Login ‚Üí then press <span class="btn-demo btn" style="display:inline-flex; padding:6px 16px;" id="oneClickDemo"><i class="fas fa-magic"></i>‰∏ÄÈîÆdemoÁôªÂΩï</span> (auto-fill + redirect)</p>
  </div>
</div>

<!-- DASHBOARD page -->
<div id="dashboard" class="page">
  <div class="container">
    <h2 class="section-title">üìä dashboard</h2>
    <div class="dashboard-grid">
      <div class="card"><i class="fas fa-wallet"></i> <h3>currencies</h3><div class="amount">$8,200 <span style="font-size:1rem;">| ‚Ç¨1,450</span></div></div>
      <div class="card"><i class="fas fa-credit-card"></i> <h3>debt / credit</h3><div class="amount">$650 due</div></div>
      <div class="card"><i class="fas fa-truck"></i> <h3>vehicle</h3><div>Honda ¬∑ 300km to service</div></div>
      <div class="card"><i class="fas fa-boxes"></i> <h3>inventory low</h3><div>toner (2) ¬∑ cables (5)</div></div>
    </div>
    <div style="display:flex; flex-wrap:wrap; gap:10px; margin:30px 0;">
      <span class="report-btn"><i class="fas fa-paperclip"></i> 2 attachments</span>
      <span class="report-btn"><i class="fas fa-coins"></i> budget left $430</span>
      <span class="report-btn"><i class="fas fa-file-pdf"></i> invoice #INV-122</span>
    </div>
    <div class="chart-glass"><canvas id="miniInvestmentChart" height="120"></canvas></div>
  </div>
</div>

<!-- TRANSACTIONS -->
<div id="transactions" class="page">
  <div class="container">
    <div class="section-title"><h2>üìã transactions</h2></div>
    <div class="txn-list">
      <div class="txn-row"><div style="display:flex; gap:12px; align-items:center;"><div class="txn-icon"><i class="fas fa-paperclip"></i></div><div><b>salary</b><br><small>salary.pdf</small></div></div><div class="income-badge">+ $3,200</div></div>
      <div class="txn-row"><div style="display:flex; gap:12px;"><div class="txn-icon"><i class="fas fa-car"></i></div><div><b>vehicle service</b><br><small>receipt attached</small></div></div><div class="expense-badge">- $120</div></div>
      <div class="txn-row"><div style="display:flex; gap:12px;"><div class="txn-icon"><i class="fas fa-credit-card"></i></div><div><b>credit payment</b><br><small>debt #CC-1</small></div></div><div class="expense-badge">- $220</div></div>
      <div class="txn-row"><div style="display:flex; gap:12px;"><div class="txn-icon"><i class="fas fa-hand-holding"></i></div><div><b>debt received</b><br><small>from John</small></div></div><div class="income-badge">+ $150</div></div>
      <div class="attach-row"><i class="fas fa-euro-sign"></i> <span>multi‚Äëcurrency: ‚Ç¨500 (‚âà$540) ¬∑ receipt.pdf</span></div>
    </div>
    <div style="display:flex; flex-wrap:wrap; gap:12px; margin:30px 0;">
      <button class="btn"><i class="fas fa-plus"></i> add transaction</button>
      <button class="btn-outline"><i class="fas fa-file-invoice"></i> invoice</button>
    </div>
    <!-- vehicle block -->
    <div class="compact-grid">
      <div class="mini-card"><i class="fas fa-car-side"></i><div><b>Honda City</b><br>service 5,230 km</div></div>
      <div class="mini-card"><i class="fas fa-gas-pump"></i><div><b>fuel log</b><br>12.5L ¬∑ $35</div></div>
      <div class="mini-card"><i class="fas fa-wrench"></i><div><b>service history</b><br>oil change May 5</div></div>
    </div>
  </div>
</div>

<!-- REPORTS -->
<div id="reports" class="page">
  <div class="container">
    <div class="section-title"><h2>üìà reports</h2></div>
    <div style="display:flex; gap:12px; flex-wrap:wrap; margin-bottom:25px;">
      <button class="btn-outline"><i class="fas fa-file-lines"></i> P&L</button>
      <button class="btn-outline"><i class="fas fa-scale-balanced"></i> trial balance</button>
      <button class="btn-outline"><i class="fas fa-chart-gantt"></i> balance sheet</button>
      <button class="btn-outline"><i class="fas fa-cubes"></i> inventory</button>
    </div>
    <div class="chart-glass"><canvas id="reportPnLChart" height="200"></canvas></div>
    <div class="chart-glass"><canvas id="inventoryChart" height="150"></canvas></div>
    <div style="display:flex; gap:20px; flex-wrap:wrap; margin-top:20px;">
      <div class="card"><i class="fas fa-file-invoice"></i> <h4>invoices</h4> #INV-101: $240 paid</div>
      <div class="card"><i class="fas fa-chart-line"></i> <h4>investment</h4> AAPL +3% ¬∑ BTC +1.2%</div>
    </div>
  </div>
</div>

<!-- SETTINGS -->
<div id="settings" class="page">
  <div class="container" style="max-width:700px;">
    <div class="section-title"><h2>‚öôÔ∏è settings</h2></div>
    <div class="card">
      <div class="setting-item"><span><b>multi‚Äëcurrency base</b></span> <select class="currency-select"><option>USD ($)</option><option>EUR (‚Ç¨)</option></select></div>
      <div class="setting-item"><span><b>monthly budget limit</b></span> <input type="number" value="3000" style="width:120px; padding:8px; border-radius:30px;"></div>
      <div class="setting-item"><span><b>enable attachments</b></span> <label class="toggle-switch"><input type="checkbox" checked> <span class="slider"></span></label></div>
      <div class="setting-item"><span><b>vehicle tracking</b></span> <label class="toggle-switch"><input type="checkbox" checked> <span class="slider"></span></label></div>
      <div class="setting-item"><span><b>debt/credit alerts</b></span> <label class="toggle-switch"><input type="checkbox" checked> <span class="slider"></span></label></div>
      <button class="btn" style="width:100%; margin-top:20px;"><i class="fas fa-save"></i> save</button>
    </div>
    <p style="text-align:center; margin-top:30px; color: #475569;">‚ú® demo button auto-fills and sends you to home.html ‚ú®</p>
  </div>
</div>

<!-- footer -->
<footer><p>Shahul Finance ¬∑ 2025 ¬∑ demo: demouser@gmail.com / demo123 ¬∑ blank until you click demo</p></footer>

<!-- AUTH MODAL (completely blank fields, eye icon, demo button inside) -->
<div class="modal" id="authModal">
  <div class="modal-content">
    <span class="close-modal" id="closeModal">&times;</span>
    <h2 id="authTitle">Login</h2>
    <p style="margin-bottom:10px; color:var(--primary);">üîê demo: demouser@gmail.com / demo123 (click demo button)</p>
    
    <!-- email field (ALWAYS BLANK initially) -->
    <input type="email" id="email" class="modal-input" placeholder="email address" value="">
    
    <!-- password field with eye toggle (hidden by default) -->
    <div style="position:relative;">
      <input type="password" id="password" class="modal-input" placeholder="password" value="">
      <button class="toggle-password" id="togglePassword" style="position:absolute;right:20px;top:22px;border:none;background:none; cursor:pointer; font-size:1.2rem; color:#64748b;"><i class="fa fa-eye"></i></button>
    </div>
    
    <div id="extraField" style="display:none;">
      <input type="password" id="confirmPassword" class="modal-input" placeholder="confirm password">
    </div>

    <!-- two buttons: normal login & one-click demo -->
    <div style="display: flex; gap: 10px; margin-top: 10px;">
      <button class="btn" id="submitBtn" style="flex:2;">Login</button>
      <button class="btn btn-demo" id="demoAutoFillBtn" style="flex:1.5;"><i class="fas fa-magic"></i> Demo</button>
    </div>
    <p style="margin-top:20px;"><span id="switchText">No account?</span> <span class="switch-link" id="switchAuth">Sign up</span></p>
  </div>
</div>

<script type="module">
  // ========== Firebase (simulated) with demo one-click ==========
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
  const firebaseConfig = { apiKey: "AIzaSyBhjgu6vpBRhMVjMs5RgSL4aViJq6GYy1A", authDomain: "budget-app-1365f.firebaseapp.com", projectId: "budget-app-1365f", storageBucket: "budget-app-1365f.appspot.com", messagingSenderId: "1036194450411", appId: "1:1036194450411:web:78ca39a5a82ab9db6c67ae" };
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // hide loading
  window.addEventListener('load', ()=> setTimeout(()=> document.getElementById('loadingScreen').style.display='none', 900));

  // navigation
  document.querySelectorAll('.nav-links a').forEach(link => link.addEventListener('click', e => {
    e.preventDefault(); const page = link.dataset.page;
    document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
    document.getElementById(page).classList.add('active');
    document.querySelectorAll('.nav-links li').forEach(li => li.classList.remove('active'));
    link.parentElement.classList.add('active');
    if (page==='reports'||page==='dashboard') setTimeout(initCharts, 50);
  }));

  // modal logic
  const modal = document.getElementById('authModal');
  document.getElementById('openAuth').addEventListener('click', ()=> {
    // ensure fields are blank every time modal opens
    document.getElementById('email').value = '';
    document.getElementById('password').value = '';
    modal.style.display='flex';
  });
  document.getElementById('closeModal').onclick = ()=> modal.style.display='none';
  window.onclick = e => { if (e.target===modal) modal.style.display='none'; };

  // eye toggle for password
  const togglePwd = document.getElementById('togglePassword');
  const pwdInput = document.getElementById('password');
  togglePwd.addEventListener('click', (e) => {
    e.preventDefault();
    const type = pwdInput.getAttribute('type') === 'password' ? 'text' : 'password';
    pwdInput.setAttribute('type', type);
    togglePwd.innerHTML = type === 'password' ? '<i class="fa fa-eye"></i>' : '<i class="fa fa-eye-slash"></i>';
  });

  // switch login/signup
  let isLogin = true;
  document.getElementById('switchAuth').onclick = () => {
    isLogin = !isLogin;
    document.getElementById('authTitle').innerText = isLogin ? 'Login' : 'Sign up';
    document.getElementById('submitBtn').innerText = isLogin ? 'Login' : 'Sign up';
    document.getElementById('extraField').style.display = isLogin ? 'none' : 'block';
    document.getElementById('switchText').innerText = isLogin ? 'No account?' : 'Have account?';
    document.getElementById('switchAuth').innerText = isLogin ? 'Sign up' : 'Login';
  };

  // ---------- ONE-CLICK DEMO BUTTON (prefill & auto sign in + redirect to home.html) ----------
  function doDemoLoginAndRedirect() {
    // fill fields
    document.getElementById('email').value = 'demouser@gmail.com';
    document.getElementById('password').value = 'demo123';
    
    // visual highlight
    document.getElementById('email').style.borderColor = '#22c55e';
    document.getElementById('password').style.borderColor = '#22c55e';
    setTimeout(() => {
      document.getElementById('email').style.borderColor = '';
      document.getElementById('password').style.borderColor = '';
    }, 600);

    // show loading
    document.getElementById('loadingScreen').style.display = 'flex';
    
    // attempt firebase sign in, but always redirect after short delay (simulate success)
    signInWithEmailAndPassword(auth, 'demouser@gmail.com', 'demo123')
      .then(() => {
        setTimeout(redirectToHome, 800);
      })
      .catch(err => {
        console.warn('firebase err, using demo redirect anyway', err);
        setTimeout(redirectToHome, 800);
      });
  }

  function redirectToHome() {
    // Simulate redirect to home.html (in real scenario you'd change window.location)
    // For demo within this single page, we simply show an alert and reset loading
    document.getElementById('loadingScreen').style.display = 'none';
    modal.style.display = 'none';
    document.getElementById('authButtonText').innerText = 'Logout';
    document.getElementById('openAuth').innerHTML = '<i class="fas fa-sign-out-alt"></i> Logout';
    alert('‚úÖ Demo login! Redirecting to home.html (simulated)');
    // Optionally you could switch to home page visually
    document.querySelectorAll('.nav-links a[data-page="home"]')[0].click();
  }

  // demo button inside modal
  document.getElementById('demoAutoFillBtn').addEventListener('click', (e) => {
    e.preventDefault();
    doDemoLoginAndRedirect();
  });

  // one-click demo button on home page (outside modal)
  document.getElementById('oneClickDemo')?.addEventListener('click', (e) => {
    e.preventDefault();
    // open modal first, then fill & redirect
    modal.style.display = 'flex';
    // ensure fields are cleared first (but demo will fill them)
    document.getElementById('email').value = '';
    document.getElementById('password').value = '';
    setTimeout(() => {
      doDemoLoginAndRedirect();
    }, 150);
  });

  // regular submit button (manual login)
  document.getElementById('submitBtn').onclick = async () => {
    const email = document.getElementById('email').value;
    const pwd = document.getElementById('password').value;
    if (!email || !pwd) { alert('please enter credentials'); return; }
    document.getElementById('loadingScreen').style.display = 'flex';
    try {
      if (isLogin) await signInWithEmailAndPassword(auth, email, pwd);
      else { 
        if (pwd !== document.getElementById('confirmPassword')?.value) throw new Error('passwords mismatch');
        await createUserWithEmailAndPassword(auth, email, pwd);
      }
      setTimeout(() => {
        document.getElementById('loadingScreen').style.display = 'none';
        modal.style.display = 'none';
        document.getElementById('authButtonText').innerText = 'Logout';
        document.getElementById('openAuth').innerHTML = '<i class="fas fa-sign-out-alt"></i> Logout';
        alert('Login successful');
        document.querySelectorAll('.nav-links a[data-page="home"]')[0].click();
      }, 800);
    } catch (err) {
      document.getElementById('loadingScreen').style.display = 'none';
      alert('Error: ' + err.message);
    }
  };

  onAuthStateChanged(auth, user => {
    if (user) {
      document.getElementById('openAuth').innerHTML = '<i class="fas fa-sign-out-alt"></i> Logout';
    }
  });

  // charts
  function initCharts() {
    const ctx1 = document.getElementById('miniInvestmentChart')?.getContext('2d'); if(ctx1) new Chart(ctx1, { type:'line', data: { labels: ['Mon','Tue','Wed','Thu','Fri'], datasets: [{ label:'portfolio $', data: [1240,1280,1320,1370,1420], borderColor:'#2563eb' }] } });
    const ctx2 = document.getElementById('reportPnLChart')?.getContext('2d'); if(ctx2) new Chart(ctx2, { type:'bar', data: { labels: ['Jan','Feb','Mar','Apr','May'], datasets: [{ label:'revenue', data: [4200,4800,5100,4900,5600] }, { label:'expenses', data: [3100,3400,3600,3800,4000] }] } });
    const ctx3 = document.getElementById('inventoryChart')?.getContext('2d'); if(ctx3) new Chart(ctx3, { type:'doughnut', data: { labels: ['electronics','stationery','furniture'], datasets: [{ data: [45,25,30] }] } });
  }
  setTimeout(initCharts, 200);
</script>
</body>
</html>