<!DOCTYPE html>
<html lang="en">
<head>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <meta charset="UTF‑8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Expense Tracker</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    body { font-family: Arial, sans-serif; background: #eef2f5; margin:0; padding:0; }
    .header { background:#fff; padding:12px 20px; display:flex; justify-content:space-between;
      align-items:center; box-shadow:0 2px 4px rgba(0,0,0,0.1); }
    .header-left a { text-decoration:none; color:#007bff; font-weight:bold; font-size:18px; }
    .header-right { display:flex; align-items:center; gap:12px; }
    #userInitials { background:#007bff; color:#fff; border-radius:50%; width:32px; height:32px;
      display:flex; align-items:center; justify-content:center; font-weight:bold; font-size:18px; }
    #username { font-weight:bold; font-size:16px; }
    button#logoutBtn { background:#dc3545; color:#fff; border:none; border-radius:4px;
      padding:6px 12px; cursor:pointer; }
    button#logoutBtn:hover { background:#a71d2a; }

    .container { max-width:1200px; margin:30px auto; background:#fff; padding:20px 30px 60px;
      border-radius:8px; box-shadow:0 0 12px rgba(0,0,0,0.1); position: relative; }

    h2 { text-align:center; margin-bottom:20px; color:#333; }

    .filter-section { margin-bottom:20px; background:#f9f9f9; padding:15px 20px;
      border-radius:8px; box-shadow:0 0 6px rgba(0,0,0,0.1); }
    .filters-row { display:flex; flex-wrap:wrap; gap:15px; align-items:center; }
    .filters-row label { font-size:14px; display:flex; flex-direction:column; min-width:140px; }
    .filters-row select, .filters-row input { margin-top:5px; padding:5px 8px; font-size:14px;
      border-radius:4px; border:1px solid #ccc; }
    #applyFiltersBtn { background:#007bff; padding:8px 16px; color:#fff; border:none;
      border-radius:5px; cursor:pointer; margin-top:10px; }
    #applyFiltersBtn:hover { background:#0056b3; }

    table { width:100%; border-collapse:collapse; font-size:14px; margin-bottom:20px; }
    th, td { border:1px solid #ccc; padding:8px 10px; text-align:left; }
    th { background:#007bff; color:#fff; }
    tbody tr:nth-child(even) { background:#f3f8fc; }
    tbody tr:hover { background:#ddeffb; }

    .attachment-cell a { color:#007bff; text-decoration:none; }
    .attachment-cell a:hover { text-decoration:underline; }

    .pagination { text-align:center; margin-top:10px; }
    .pagination button { margin:0 3px; padding:6px 10px; border:none;
      background:#007bff; color:#fff; border-radius:4px; cursor:pointer; }
    .pagination button.disabled { background:#aaa; cursor:not-allowed; }
    .pagination button.active { background:#0056b3; }

    #addTransactionBtn {
      position: fixed; bottom:30px; right:30px; background:#28a745; color:white;
      border:none; border-radius:50%; width:60px; height:60px; font-size:32px;
      cursor:pointer; box-shadow:0 4px 12px rgba(0,0,0,0.3); display:flex;
      align-items:center; justify-content:center; z-index:1000;
    }
    #addTransactionBtn:hover { background:#218838; }

    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%;
      background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1001; }
    .modal-content { background:white; padding:20px; border-radius:8px; width:90%;
      max-width:450px; display:flex; flex-direction:column; gap:10px; position:relative; }
    .modal-content label { font-size:14px; display:flex; flex-direction:column; }
    .modal-content input { padding:6px; border:1px solid #ccc; border-radius:4px; }
    .modal-content button { background:#007bff; color:white; padding:8px;
      border:none; border-radius:4px; font-size:16px; cursor:pointer; }
    .modal-content button:hover { background:#0056b3; }
    .close { position:absolute; top:10px; right:15px; font-size:24px; cursor:pointer; }

    .loading-modal {
  display: none;
  position: fixed;
  z-index: 2000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.6);
  justify-content: center;
  align-items: center;
}

.loading-content {
  text-align: center;
  background: white;
  padding: 30px 40px;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
  color: #007bff;
  font-size: 18px;
}

.btn-edit {
  background: #eccc6c;
  color: #000;
  border: none;
  padding: 6px 10px;
  border-radius: 4px;
  cursor: pointer;
}
.btn-edit:hover {
  background: #eccc6c;
}

.btn-delete {
  background: #dc3545;
  color: white;
  border: none;
  padding: 6px 10px;
  border-radius: 4px;
  cursor: pointer;
}
.btn-delete:hover {
  background: #c82333;
}

.create-mode .modal-content {
  border-left: 6px solid #28a745; /* Green for add */
}

.edit-mode .modal-content {
  border-left: 6px solid #ffc107; /* Yellow for edit */
}


  </style>
</head>
<body>

  <div class="header">
    <div class="header-left"><a href="home.html"><i class="fa fa-home"></i> Home</a></div>
    <div class="header-right">
      <div id="userInitials">U</div>
      <div id="username">User</div>
      <button id="logoutBtn">Logout</button>
    </div>
  </div>

  <div class="container">
    <h2><i class="fa fa-money-bill-wave"></i> Expense Tracker</h2>
    <input type="file" id="csvInput" accept=".csv" />

    <div class="filter-section">
      <div class="filters-row">
        <label>Date Filter:
          <select id="dateFilter"><option value="all">All</option><option value="week">This Week</option>
              <option value="month">This Month</option><option value="year">This Year</option>
              <option value="custom">Custom Range</option></select>
        </label>
        <label id="customDateRange" style="display:none;">From:
          <input type="date" id="startDate" /> To: <input type="date" id="endDate" />
        </label>
        <label>Income/Expense:
          <select id="incomeExpenseFilter"><option value="all">All</option><option value="income">Income Only</option>
            <option value="expense">Expense Only</option></select>
        </label>
        <label>Description contains:<input type="text" id="descFilter" placeholder="Search…"/></label>
        <label>Mode:<select id="modeFilter"><option value="all">All</option></select></label>
        <label>Bank:<select id="bankFilter"><option value="all">All</option></select></label>
        <button id="applyFiltersBtn">Apply Filters</button>
      </div>
    </div>

    <table>
      <thead>
        <tr>
          <th>SINO</th><th>DATE</th><th>TIME</th><th>ACCOUNT HEADER</th><th>MODE</th>
          <th>BANK NAME</th><th>INCOME</th><th>EXPENSE</th><th>DESCRIPTION</th>
          <th>BALANCE</th><th>ATTACHMENT</th><th>ACTION</th>
        </tr>
      </thead>
      <tbody id="transactionsTableBody">
        <tr><td colspan="12" style="text-align:center; color:#777;">No transactions loaded.</td></tr>
      </tbody>
    </table>

    <div class="pagination" id="pagination"></div>
  </div>

  <button id="addTransactionBtn" title="Add Transaction"><i class="fa fa-plus"></i></button>

  <div id="transactionModal" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <h3 id="modalTitle">Add Transaction</h3>
      <form id="transactionForm">
        <input type="hidden" id="txId" />
        <label>SINO: <input type="text" id="formSINO" required /></label>
        <label>DATE: <input type="date" id="formDATE" required /></label>
        <label>TIME: <input type="time" id="formTIME" required /></label>
        <label>ACCOUNT HEADER: <input type="text" id="formHEADER" required /></label>
        <label>MODE: <input type="text" id="formMODE" /></label>
        <label>BANK NAME: <input type="text" id="formBANK" /></label>
        <label>INCOME: <input type="number" step="0.01" id="formINCOME" /></label>
        <label>EXPENSE: <input type="number" step="0.01" id="formEXPENSE" /></label>
        <label>DESCRIPTION: <input type="text" id="formDESC" /></label>
        <label>BALANCE: <input type="number" step="0.01" id="formBALANCE" /></label>
        <label>ATTACHMENT FILE: <input type="file" id="formATTACH" accept="image/*,application/pdf" /></label>
        <button type="submit">Save</button>
      </form>
    </div>
  </div>

  <div id="loadingModal" class="loading-modal">
    <div class="loading-content"><i class="fa fa-spinner fa-spin" style="font-size:40px;"></i>
      <p>Loading, please wait…</p></div>
  </div>

<div id="confirmDeleteModal" class="modal">
  <div class="modal-content" style="max-width: 400px;">
    <span class="close" id="closeConfirmDelete">&times;</span>
    <h3 style="margin-bottom: 10px;">Confirm Delete</h3>
    <p>Are you sure you want to delete this transaction?</p>
    <div style="display:flex; justify-content:flex-end; gap:10px; margin-top:20px;">
      <button id="cancelDeleteBtn" style="background:#6c757d;">Cancel</button>
      <button id="confirmDeleteBtn" style="background:#dc3545;">Delete</button>
    </div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, query, getDocs, writeBatch, doc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

const app = initializeApp({
  apiKey: "AIzaSyBhjgu6vpBRhMVjMs5RgSL4aViJq6GYy1A",
  authDomain: "budget-app-1365f.firebaseapp.com",
  projectId: "budget-app-1365f",
  storageBucket: "budget-app-1365f.appspot.com",
  messagingSenderId: "1036194450411",
  appId: "1:1036194450411:web:78ca39a5a82ab9db6c67ae",
  measurementId: "G-YFFJL2H54X"
});
const db = getFirestore(app), auth = getAuth(app);

const usernameElem = document.getElementById("username"), initialsElem = document.getElementById("userInitials"), logoutBtn = document.getElementById("logoutBtn");
const csvInput = document.getElementById("csvInput"), tableBody = document.getElementById("transactionsTableBody");
const loadingModal = document.getElementById("loadingModal"), dateFilter = document.getElementById("dateFilter");
const customDateRange = document.getElementById("customDateRange"), startDateInput = document.getElementById("startDate"), endDateInput = document.getElementById("endDate");
const incomeExpenseFilter = document.getElementById("incomeExpenseFilter"), descFilter = document.getElementById("descFilter");
const modeFilter = document.getElementById("modeFilter"), bankFilter = document.getElementById("bankFilter");
const applyFiltersBtn = document.getElementById("applyFiltersBtn");
const addBtn = document.getElementById("addTransactionBtn"), modal = document.getElementById("transactionModal");
addBtn.onclick = () => {
  document.getElementById("modalTitle").innerText = "Add Transaction";
  modal.classList.remove("edit-mode");
  modal.classList.add("create-mode");
  modal.style.display = "flex";
  
  form.reset(); // clear the form
  document.getElementById("txId").value = ""; // make sure ID is cleared
};
const closeModal = () => modal.style.display = "none";
const form = document.getElementById("transactionForm");
let currentUser=null, allTransactions = [], filteredTransactions = [];
let currentPage = 1, rowsPerPage = 10;

onAuthStateChanged(auth, async user => {
  if (user) {
    currentUser = user;
    const name = user.displayName || user.email || "User";
    usernameElem.textContent = name;
    initialsElem.textContent = name.charAt(0).toUpperCase();
    await loadTransactions();
  } else {
    alert("Please login first."); window.location.href="index.html";
  }
});
logoutBtn.addEventListener("click", async ()=>{
  await signOut(auth); window.location.href="index.html";
});

csvInput.addEventListener("change", async e=>{
  const file=e.target.files[0];
  if(!file||!file.name.toLowerCase().endsWith(".csv")) return alert("Please upload a valid CSV file.");
  loadingModal.style.display="flex";
  const text=await file.text(), parsed=parseCSV(text);
  const requiredCols=["SINO","DATE","TIME","ACCOUNT HEADER","MODE","BANK NAME","INCOME","EXPENSE","DESCRIPTION","BALANCE","ATTACHMENT"];
  for(let h of requiredCols) if(!parsed[0]?.[h]){ alert(`Missing column "${h}"`); loadingModal.style.display="none"; return; }
  try {
    await clearUserTransactions();
    const txRef = collection(db,"users",currentUser.uid,"transactions");
    for(let row of parsed){
      await addDoc(txRef,{
        SINO:row.SINO, DATE:row.DATE, TIME:row.TIME,
        ACCOUNT_HEADER:row["ACCOUNT HEADER"], MODE:row.MODE, BANK_NAME:row["BANK NAME"],
        INCOME:parseFloat(row.INCOME)||0, EXPENSE:parseFloat(row.EXPENSE)||0,
        DESCRIPTION:row.DESCRIPTION, BALANCE:parseFloat(row.BALANCE)||0,
        ATTACHMENT:row["ATTACHMENT"]||""
      });
    }
    alert("CSV uploaded successfully!"); csvInput.value=""; await loadTransactions();
  } catch(err){ alert("Error saving data: "+err.message); }
  finally{ loadingModal.style.display="none"; }
});

dateFilter.addEventListener("change", ()=>{
  customDateRange.style.display = dateFilter.value==="custom"?"inline-flex":"none";
  if(dateFilter.value!=="custom"){ startDateInput.value=""; endDateInput.value=""; }
});
applyFiltersBtn.addEventListener("click", applyFilters);

window.editTransaction = (tx) => {
  document.getElementById("modalTitle").innerText = "Edit Transaction";
  modal.classList.remove("create-mode");
  modal.classList.add("edit-mode");
  modal.style.display = "flex";

  document.getElementById("txId").value = tx.id;
  formSINO.value = tx.SINO || "";
  formDATE.value = tx.DATE || "";
  formTIME.value = tx.TIME || "";
  formHEADER.value = tx.ACCOUNT_HEADER || "";
  formMODE.value = tx.MODE || "";
  formBANK.value = tx.BANK_NAME || "";
  formINCOME.value = tx.INCOME || "";
  formEXPENSE.value = tx.EXPENSE || "";
  formDESC.value = tx.DESCRIPTION || "";
  formBALANCE.value = tx.BALANCE || "";
  formATTACH.value = tx.ATTACHMENT || "";
};

document.querySelector(".close").addEventListener("click", closeModal);
window.addEventListener("click", e=>{ if(e.target===modal) closeModal(); });

form.addEventListener("submit", async e => {
  e.preventDefault();
  const txId = document.getElementById("txId").value;
  const file = formATTACH.files[0];
  const data = {
    SINO: formSINO.value,
    DATE: formDATE.value,
    TIME: formTIME.value,
    ACCOUNT_HEADER: formHEADER.value,
    MODE: formMODE.value,
    BANK_NAME: formBANK.value,
    INCOME: parseFloat(formINCOME.value) || 0,
    EXPENSE: parseFloat(formEXPENSE.value) || 0,
    DESCRIPTION: formDESC.value,
    BALANCE: parseFloat(formBALANCE.value) || 0,
    ATTACHMENT: ""
  };

  try {
    loadingModal.style.display = "flex";

    // Upload attachment if exists
    if (file) {
      const { getStorage, ref, uploadBytes, getDownloadURL } = await import("https://www.gstatic.com/firebasejs/10.12.2/firebase-storage.js");
      const storage = getStorage();
      const storageRef = ref(storage, `attachments/${currentUser.uid}/${Date.now()}_${file.name}`);
      await uploadBytes(storageRef, file);
      const url = await getDownloadURL(storageRef);
      data.ATTACHMENT = url;
    }

    if (txId) {
      await updateDoc(doc(db, "users", currentUser.uid, "transactions", txId), data);
    } else {
      await addDoc(collection(db, "users", currentUser.uid, "transactions"), data);
    }

    closeModal();
    await loadTransactions();
  } catch (err) {
    alert("Error saving transaction: " + err.message);
  } finally {
    loadingModal.style.display = "none";
  }
});

async function deleteTransaction(id) {
const result = await Swal.fire({
  title: 'Are you sure?',
  text: "This transaction will be permanently deleted.",
  icon: 'warning',
  showCancelButton: true,
  confirmButtonColor: '#dc3545',
  cancelButtonColor: '#6c757d',
  confirmButtonText: 'Yes, delete it!'
});

  if (result.isConfirmed) {
    try {
      loadingModal.style.display = "flex";
      await deleteDoc(doc(db, "users", currentUser.uid, "transactions", id));
      await loadTransactions();
      Swal.fire('Deleted!', 'Transaction has been deleted.', 'success');
    } catch (err) {
      Swal.fire('Error!', err.message, 'error');
    } finally {
      loadingModal.style.display = "none";
    }
  }
}


async function loadTransactions() {
  loadingModal.style.display="flex";
  try {
    const snap = await getDocs(collection(db,"users",currentUser.uid,"transactions"));
    allTransactions = snap.docs.map(d=>({ id:d.id,...d.data() }));
    allTransactions.sort((a,b)=>(parseInt(b.SINO)||0)-(parseInt(a.SINO)||0));
    populateOptions(allTransactions);
    applyFilters(); // will also trigger pagination
  } catch(err){ alert("Error loading transactions: "+err.message); }
  finally { loadingModal.style.display="none"; }
}

function populateOptions(data){
  const modes=new Set(), banks=new Set();
  data.forEach(t=>{ if(t.MODE) modes.add(t.MODE); if(t.BANK_NAME) banks.add(t.BANK_NAME); });
  modeFilter.innerHTML = `<option value="all">All</option>` + [...modes].sort().map(v=>`<option>${v}</option>`).join("");
  bankFilter.innerHTML = `<option value="all">All</option>` + [...banks].sort().map(v=>`<option>${v}</option>`).join("");
}

function applyFilters(){
  filteredTransactions = allTransactions.slice();
  const now = new Date();
  const isIn = (str,s,e)=> str && new Date(str)>=s && new Date(str)<=e;

  switch(dateFilter.value){
    case "week": { const s=new Date(now); s.setHours(0,0,0,0); s.setDate(now.getDate()-now.getDay());
      filteredTransactions = filteredTransactions.filter(t=>isIn(t.DATE,s,now)); break; }
    case "month": { const s=new Date(now.getFullYear(),now.getMonth(),1);
      filteredTransactions = filteredTransactions.filter(t=>isIn(t.DATE,s,now)); break; }
    case "year": { const s=new Date(now.getFullYear(),0,1);
      filteredTransactions = filteredTransactions.filter(t=>isIn(t.DATE,s,now)); break; }
    case "custom":
      if(startDateInput.value && endDateInput.value){
        let s=new Date(startDateInput.value), e=new Date(endDateInput.value);
        e.setHours(23,59,59,999);
        filteredTransactions = filteredTransactions.filter(t=>isIn(t.DATE,s,e));
      }
      break;
  }

  if(incomeExpenseFilter.value==="income")
    filteredTransactions = filteredTransactions.filter(t=>t.INCOME>0);
  else if(incomeExpenseFilter.value==="expense")
    filteredTransactions = filteredTransactions.filter(t=>t.EXPENSE>0);

  if(descFilter.value.trim()){
    const search = descFilter.value.trim().toLowerCase();
    filteredTransactions = filteredTransactions.filter(t=> (t.DESCRIPTION||"").toLowerCase().includes(search));
  }
  if(modeFilter.value!=="all") filteredTransactions = filteredTransactions.filter(t=>t.MODE===modeFilter.value);
  if(bankFilter.value!=="all") filteredTransactions = filteredTransactions.filter(t=>t.BANK_NAME===bankFilter.value);

  currentPage = 1;
  buildTable();
}

function buildTable(){
  const start = (currentPage-1)*rowsPerPage;
  const end = start + rowsPerPage;
  const pageItems = filteredTransactions.slice(start, end);
  tableBody.innerHTML = "";
  if(pageItems.length === 0){
    tableBody.innerHTML = `<tr><td colspan="12" style="text-align:center;color:#777;">No transactions found.</td></tr>`;
  } else {
   pageItems.forEach(d =>{
      const incomeCell = d.INCOME>0 ? `<span style="color:green;">${d.INCOME.toFixed(2)}</span>`:"";
      const expenseCell = d.EXPENSE>0 ? `<span style="color:red;">${d.EXPENSE.toFixed(2)}</span>`:"";
      const balanceCell = d.BALANCE? d.BALANCE.toFixed(2):"";
      const row = document.createElement("tr");
row.innerHTML = `
  <td>${escapeHtml(d.SINO)}</td>
  <td>${escapeHtml(d.DATE)}</td>
  <td>${escapeHtml(d.TIME)}</td>
  <td>${escapeHtml(d.ACCOUNT_HEADER)}</td>
  <td>${escapeHtml(d.MODE)}</td>
  <td>${escapeHtml(d.BANK_NAME)}</td>
  <td>${incomeCell}</td>
  <td>${expenseCell}</td>
  <td>${escapeHtml(d.DESCRIPTION)}</td>
  <td>${balanceCell}</td>
  <td class="attachment-cell">${d.ATTACHMENT ? `<a href="${escapeHtml(d.ATTACHMENT)}" target="_blank" rel="noopener noreferrer">View</a>` : ""}</td>
  <td>
    <button class="btn-edit" onclick='editTransaction(${JSON.stringify(d)})'>Edit</button>
<button class="btn-delete" onclick='deleteTransaction("${d.id}")'>Delete</button>

  </td>
`;

      tableBody.appendChild(row);
    });
  }
  renderPagination();
}






function renderPagination() {
  const totalPages = Math.ceil(filteredTransactions.length / rowsPerPage) || 1;
  const container = document.getElementById("pagination");
  container.innerHTML = "";

  if (totalPages <= 1) return;

  const createButton = (text, page, disabled = false, active = false) => {
    const btn = document.createElement("button");
    btn.textContent = text;
    if (active) btn.classList.add("active");
    if (disabled) {
      btn.classList.add("disabled");
      btn.disabled = true;
    } else {
      btn.onclick = () => {
        currentPage = page;
        buildTable();
      };
    }
    container.appendChild(btn);
  };

  const addEllipsis = () => {
    const span = document.createElement("span");
    span.textContent = "...";
    span.style.margin = "0 5px";
    span.style.color = "#666";
    container.appendChild(span);
  };

  const pageRange = [];
  if (totalPages <= 7) {
    for (let i = 1; i <= totalPages; i++) pageRange.push(i);
  } else {
    pageRange.push(1);

    if (currentPage > 4) addEllipsis();

    const start = Math.max(2, currentPage - 1);
    const end = Math.min(totalPages - 1, currentPage + 1);
    for (let i = start; i <= end; i++) pageRange.push(i);

    if (currentPage < totalPages - 3) addEllipsis();

    pageRange.push(totalPages);
  }

  pageRange.forEach(p => {
    if (typeof p === "number") {
      createButton(p, p, false, p === currentPage);
    }
  });
}



function escapeHtml(text) {
  if (!text) return "";
  return text.replace(/[&<>"']/g, function(m) {
    return ({
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#39;'
    })[m];
  });
}

let transactionToDelete = null;

const confirmDeleteModal = document.getElementById("confirmDeleteModal");
const closeConfirmDelete = document.getElementById("closeConfirmDelete");
const cancelDeleteBtn = document.getElementById("cancelDeleteBtn");
const confirmDeleteBtn = document.getElementById("confirmDeleteBtn");

function showDeleteConfirm(id) {
  transactionToDelete = id;
  confirmDeleteModal.style.display = "flex";
}

closeConfirmDelete.onclick = () => confirmDeleteModal.style.display = "none";
cancelDeleteBtn.onclick = () => confirmDeleteModal.style.display = "none";
window.onclick = (e) => {
  if (e.target === confirmDeleteModal) confirmDeleteModal.style.display = "none";
};

confirmDeleteBtn.onclick = async () => {
  if (!transactionToDelete) return;
  confirmDeleteModal.style.display = "none";
  try {
    loadingModal.style.display = "flex";
    await deleteDoc(doc(db, "users", currentUser.uid, "transactions", transactionToDelete));
    await loadTransactions();
  } catch (err) {
    alert("Error deleting: " + err.message);
  } finally {
    loadingModal.style.display = "none";
    transactionToDelete = null;
  }
};




</script>

</body>
</html>
