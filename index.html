<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Budget App by Shahul</title>
  <style>
    /* Global Styles */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      background: #f7f7f7;
    }
    
    .container {
      width: 100%;
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
    }
    
    .btn {
      background: #6200ee;
      color: #fff;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 18px;
      cursor: pointer;
      margin-top: 20px;
      transition: all 0.3s ease;
    }
    
    .btn:hover {
      background: #4a00c8;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    
    /* Header Styles */
    header {
      background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://source.unsplash.com/1600x600/?finance,money') no-repeat center/cover;
      color: #fff;
      text-align: center;
      padding: 120px 20px;
    }
    
    header h1 {
      font-size: 48px;
      margin-bottom: 20px;
    }
    
    header p {
      font-size: 20px;
      max-width: 600px;
      margin: 0 auto;
    }
    
    /* Navigation */
    nav {
      background: #fff;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .nav-container {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
    }
    
    .logo {
      font-size: 24px;
      font-weight: bold;
      color: #6200ee;
    }
    
    .nav-links {
      display: flex;
      list-style: none;
    }
    
    .nav-links li {
      margin-left: 30px;
    }
    
    .nav-links a {
      text-decoration: none;
      color: #333;
      font-weight: 500;
      transition: color 0.3s ease;
    }
    
    .nav-links a:hover {
      color: #6200ee;
    }
    
    /* Page Sections */
    .page {
      display: none;
      padding: 60px 0;
      min-height: calc(100vh - 200px);
    }
    
    .page.active {
      display: block;
    }
    
    section {
      padding: 60px 0;
      text-align: center;
    }
    
    section:nth-child(even) {
      background: #fff;
    }
    
    section:nth-child(odd) {
      background: #f0f0ff;
    }
    
    h2 {
      font-size: 36px;
      margin-bottom: 30px;
      color: #333;
    }
    
    /* Dashboard Styles */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-top: 40px;
    }
    
    .dashboard-card {
      background: #fff;
      border-radius: 10px;
      padding: 25px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }
    
    .dashboard-card:hover {
      transform: translateY(-5px);
    }
    
    .dashboard-card h3 {
      margin-bottom: 15px;
      color: #6200ee;
    }
    
    /* Features Grid */
    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-top: 40px;
    }
    
    .feature-card {
      background: #fff;
      border-radius: 10px;
      padding: 30px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      transition: transform 0.3s ease;
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
    }
    
    .feature-card h3 {
      margin-bottom: 15px;
      color: #6200ee;
    }
    
    /* Form Styles */
    .form-group {
      margin-bottom: 20px;
      text-align: left;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
    }
    
    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 16px;
    }
    
    /* Transaction List */
    .transaction-list {
      margin-top: 30px;
    }
    
    .transaction-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px;
      border-bottom: 1px solid #eee;
      background: #fff;
    }
    
    .transaction-item:last-child {
      border-bottom: none;
    }
    
    .transaction-item.income {
      border-left: 4px solid #4caf50;
    }
    
    .transaction-item.expense {
      border-left: 4px solid #f44336;
    }
    
    /* Footer */
    footer {
      text-align: center;
      padding: 30px;
      background: #6200ee;
      color: #fff;
    }
    
    /* Auth Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    
    .modal-content {
      background: #fff;
      padding: 30px;
      border-radius: 10px;
      width: 350px;
      text-align: center;
      animation: fadeIn 0.3s;
    }
    
    @keyframes fadeIn {
      from {opacity:0; transform:translateY(-20px);}
      to {opacity:1; transform:translateY(0);}
    }
    
    input {
      width: 90%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
    }
    
    .switch-link {
      color: #6200ee;
      cursor: pointer;
      text-decoration: underline;
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
      .nav-container {
        flex-direction: column;
      }
      
      .nav-links {
        margin-top: 15px;
      }
      
      .nav-links li {
        margin: 0 10px;
      }
      
      header h1 {
        font-size: 36px;
      }
      
      header p {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav>
    <div class="container nav-container">
      <div class="logo">Budget App</div>
      <ul class="nav-links">
        <li><a href="#" data-page="home">Home</a></li>
        <li><a href="#" data-page="dashboard">Dashboard</a></li>
        <li><a href="#" data-page="features">Features</a></li>
        <li><button class="btn" id="openAuth">Login / Sign Up</button></li>
      </ul>
    </div>
  </nav>

  <!-- Home Page -->
  <div id="home" class="page active">
    <!-- Hero -->
    <header>
      <h1>Budget App</h1>
      <p>Track your income, expenses, and reminders — all in one dashboard. Created by <b>Shahul</b>.</p>
      <button class="btn" id="openAuthHero">Get Started</button>
    </header>

    <!-- About -->
    <section>
      <div class="container">
        <h2>About</h2>
        <p>This budget app helps you manage your daily expenses, incomes, and financial goals easily. Stay on top of your finances with visual reports and a powerful reminder calendar.</p>
      </div>
    </section>
  </div>

  <!-- Dashboard Page -->
  <div id="dashboard" class="page">
    <div class="container">
      <h2>Your Dashboard</h2>
      <p>Welcome to your financial dashboard. Here you can track all your transactions and financial health.</p>
      
      <div class="dashboard-grid">
        <div class="dashboard-card">
          <h3>Total Balance</h3>
          <p id="totalBalance">$0.00</p>
        </div>
        
        <div class="dashboard-card">
          <h3>Total Income</h3>
          <p id="totalIncome">$0.00</p>
        </div>
        
        <div class="dashboard-card">
          <h3>Total Expenses</h3>
          <p id="totalExpenses">$0.00</p>
        </div>
      </div>
      
      <h3 style="margin-top: 40px;">Recent Transactions</h3>
      <div class="transaction-list" id="transactionList">
        <!-- Transactions will be added here dynamically -->
        <p>No transactions yet. Add some to see them here!</p>
      </div>
      
      <h3 style="margin-top: 40px;">Add Transaction</h3>
      <div style="max-width: 500px; margin: 0 auto;">
        <div class="form-group">
          <label for="transactionType">Type</label>
          <select id="transactionType">
            <option value="income">Income</option>
            <option value="expense">Expense</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="transactionAmount">Amount</label>
          <input type="number" id="transactionAmount" placeholder="Enter amount">
        </div>
        
        <div class="form-group">
          <label for="transactionCategory">Category</label>
          <select id="transactionCategory">
            <option value="salary">Salary</option>
            <option value="freelance">Freelance</option>
            <option value="investment">Investment</option>
            <option value="food">Food</option>
            <option value="transport">Transport</option>
            <option value="entertainment">Entertainment</option>
            <option value="utilities">Utilities</option>
            <option value="other">Other</option>
          </select>
        </div>
        
        <div class="form-group">
          <label for="transactionDate">Date</label>
          <input type="date" id="transactionDate">
        </div>
        
        <div class="form-group">
          <label for="transactionNote">Note (Optional)</label>
          <textarea id="transactionNote" rows="3" placeholder="Add a note about this transaction"></textarea>
        </div>
        
        <button class="btn" id="addTransaction">Add Transaction</button>
      </div>
    </div>
  </div>

  <!-- Features Page -->
  <div id="features" class="page">
    <div class="container">
      <h2>Features</h2>
      <p>Our budget app comes packed with features to help you manage your finances effectively.</p>
      
      <div class="features-grid">
        <div class="feature-card">
          <h3>Expense Tracking</h3>
          <p>Easily track all your expenses across different categories to understand where your money is going.</p>
        </div>
        
        <div class="feature-card">
          <h3>Income Management</h3>
          <p>Record all sources of income to get a complete picture of your financial inflows.</p>
        </div>
        
        <div class="feature-card">
          <h3>Visual Reports</h3>
          <p>Get insightful visual reports and charts that help you understand your spending patterns.</p>
        </div>
        
        <div class="feature-card">
          <h3>Budget Planning</h3>
          <p>Set monthly budgets for different categories and track your progress throughout the month.</p>
        </div>
        
        <div class="feature-card">
          <h3>Reminder System</h3>
          <p>Never miss a bill payment with our smart reminder system that alerts you before due dates.</p>
        </div>
        
        <div class="feature-card">
          <h3>Secure Data</h3>
          <p>Your financial data is securely stored and encrypted, ensuring your privacy and security.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    Made by Shahul • 2025 © Budget App
  </footer>

  <!-- Auth Modal -->
  <div class="modal" id="authModal">
    <div class="modal-content">
      <h2 id="authTitle">Login</h2>
      <input type="email" id="email" placeholder="Email">
      <input type="password" id="password" placeholder="Password">
      <div id="extraField" style="display:none;">
        <input type="password" id="confirmPassword" placeholder="Confirm Password">
      </div>
      <button class="btn" id="submitBtn">Login</button>
      <p><span id="switchText">Don't have an account?</span> 
         <span class="switch-link" id="switchAuth">Sign Up</span></p>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";
    import { getFirestore, collection, addDoc, query, where, getDocs, onSnapshot } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBhjgu6vpBRhMVjMs5RgSL4aViJq6GYy1A",
      authDomain: "budget-app-1365f.firebaseapp.com",
      projectId: "budget-app-1365f",
      storageBucket: "budget-app-1365f.appspot.com",
      messagingSenderId: "1036194450411",
      appId: "1:1036194450411:web:78ca39a5a82ab9db6c67ae",
      measurementId: "G-YFFJL2H54X"
    };
    
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);
    
    // Navigation
    document.querySelectorAll('.nav-links a').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const pageId = link.getAttribute('data-page');
        showPage(pageId);
      });
    });
    
    function showPage(pageId) {
      document.querySelectorAll('.page').forEach(page => {
        page.classList.remove('active');
      });
      document.getElementById(pageId).classList.add('active');
    }
    
    // Modal toggle
    const modal = document.getElementById("authModal");
    document.getElementById("openAuth").onclick = () => modal.style.display="flex";
    document.getElementById("openAuthHero").onclick = () => modal.style.display="flex";
    window.onclick = (e) => { if(e.target==modal) modal.style.display="none"; };
    
    // Switch login/signup
    let isLogin = true;
    const switchAuth = document.getElementById("switchAuth");
    switchAuth.onclick = () => {
      isLogin = !isLogin;
      document.getElementById("authTitle").innerText = isLogin ? "Login" : "Sign Up";
      document.getElementById("submitBtn").innerText = isLogin ? "Login" : "Sign Up";
      document.getElementById("extraField").style.display = isLogin ? "none" : "block";
      document.getElementById("switchText").innerText = isLogin ? "Don't have an account?" : "Already have an account?";
      switchAuth.innerText = isLogin ? "Sign Up" : "Login";
    };
    
    // Handle auth submit
    document.getElementById("submitBtn").onclick = async () => {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;
      
      if(isLogin){
        try {
          const userCred = await signInWithEmailAndPassword(auth, email, password);
          localStorage.setItem("uid", userCred.user.uid);
          modal.style.display = "none";
          loadUserData(userCred.user.uid);
        } catch(e) { alert(e.message); }
      } else {
        const confirm = document.getElementById("confirmPassword").value;
        if(password !== confirm) return alert("Passwords do not match!");
        try {
          const userCred = await createUserWithEmailAndPassword(auth, email, password);
          localStorage.setItem("uid", userCred.user.uid);
          modal.style.display = "none";
          loadUserData(userCred.user.uid);
        } catch(e) { alert(e.message); }
      }
    };
    
    // Check auth state
    onAuthStateChanged(auth, (user) => {
      if (user) {
        // User is signed in
        loadUserData(user.uid);
        document.getElementById('openAuth').textContent = 'Logout';
        document.getElementById('openAuth').onclick = () => {
          signOut(auth);
          localStorage.removeItem('uid');
          document.getElementById('openAuth').textContent = 'Login / Sign Up';
          document.getElementById('openAuth').onclick = () => modal.style.display="flex";
          showPage('home');
        };
      } else {
        // User is signed out
        showPage('home');
      }
    });
    
    // Load user data
    function loadUserData(uid) {
      showPage('dashboard');
      
      // Listen for transactions
      const q = query(collection(db, "transactions"), where("userId", "==", uid));
      onSnapshot(q, (querySnapshot) => {
        let totalIncome = 0;
        let totalExpenses = 0;
        const transactionList = document.getElementById('transactionList');
        transactionList.innerHTML = '';
        
        querySnapshot.forEach((doc) => {
          const transaction = doc.data();
          const item = document.createElement('div');
          item.className = `transaction-item ${transaction.type}`;
          
          const amountFormatted = new Intl.NumberFormat('en-US', {
            style: 'currency',
            currency: 'USD'
          }).format(transaction.amount);
          
          item.innerHTML = `
            <div>
              <strong>${transaction.category}</strong>
              <p>${transaction.note || ''}</p>
              <small>${new Date(transaction.date.seconds * 1000).toLocaleDateString()}</small>
            </div>
            <div>${amountFormatted}</div>
          `;
          
          transactionList.appendChild(item);
          
          if (transaction.type === 'income') {
            totalIncome += parseFloat(transaction.amount);
          } else {
            totalExpenses += parseFloat(transaction.amount);
          }
        });
        
        const totalBalance = totalIncome - totalExpenses;
        
        document.getElementById('totalBalance').textContent = new Intl.NumberFormat('en-US', {
          style: 'currency',
          currency: 'USD'
        }).format(totalBalance);
        
        document.getElementById('totalIncome').textContent = new Intl.NumberFormat('en-US', {
          style: 'currency',
          currency: 'USD'
        }).format(totalIncome);
        
        document.getElementById('totalExpenses').textContent = new Intl.NumberFormat('en-US', {
          style: 'currency',
          currency: 'USD'
        }).format(totalExpenses);
        
        if (querySnapshot.empty) {
          transactionList.innerHTML = '<p>No transactions yet. Add some to see them here!</p>';
        }
      });
    }
    
    // Add transaction
    document.getElementById('addTransaction').addEventListener('click', async () => {
      const uid = localStorage.getItem('uid');
      if (!uid) {
        alert('Please login first');
        return;
      }
      
      const type = document.getElementById('transactionType').value;
      const amount = parseFloat(document.getElementById('transactionAmount').value);
      const category = document.getElementById('transactionCategory').value;
      const date = document.getElementById('transactionDate').value || new Date().toISOString().split('T')[0];
      const note = document.getElementById('transactionNote').value;
      
      if (!amount || amount <= 0) {
        alert('Please enter a valid amount');
        return;
      }
      
      try {
        await addDoc(collection(db, "transactions"), {
          userId: uid,
          type,
          amount,
          category,
          date: new Date(date),
          note,
          createdAt: new Date()
        });
        
        // Clear form
        document.getElementById('transactionAmount').value = '';
        document.getElementById('transactionNote').value = '';
        
        alert('Transaction added successfully!');
      } catch (e) {
        console.error("Error adding transaction: ", e);
        alert('Error adding transaction');
      }
    });
    
    // Set default date to today
    document.getElementById('transactionDate').valueAsDate = new Date();
  </script>
</body>
</html>
